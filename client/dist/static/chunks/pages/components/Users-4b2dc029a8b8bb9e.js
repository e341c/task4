(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[846],{11:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/Users",function(){return s(9518)}])},4377:function(e,t,s){"use strict";var n=s(6154);t.Z=n.Z.create({baseURL:"https://task4-server-4uuf.onrender.com"})},8966:function(e,t){"use strict";t.Z={headers:{"Content-Type":"application/json"},withCredentials:!0}},9518:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(5893);s(4494);var c=s(4184),r=s.n(c),i=s(7294),a=s(6792);let l=i.forwardRef(({bsPrefix:e,className:t,striped:s,bordered:c,borderless:i,hover:l,size:d,variant:o,responsive:h,...u},x)=>{let j=(0,a.vE)(e,"table"),g=r()(t,j,o&&`${j}-${o}`,d&&`${j}-${d}`,s&&`${j}-${"string"==typeof s?`striped-${s}`:"striped"}`,c&&`${j}-bordered`,i&&`${j}-borderless`,l&&`${j}-hover`),p=(0,n.jsx)("table",{...u,className:g,ref:x});if(h){let e=`${j}-responsive`;return"string"==typeof h&&(e=`${e}-${h}`),(0,n.jsx)("div",{className:e,children:p})}return p});var d=s(3680),o=s(4377),h=s(8966),u=function(){let[e,t]=(0,i.useState)(!1),[s,c]=(0,i.useState)([]),[r,a]=(0,i.useState)([]),[u,x]=(0,i.useState)([]);function j(e){let t=e.target.checked,s=e.target.value;t?x([...u,s]):x(e=>e.filter(e=>e!==s))}let g=async e=>{try{e.map(async e=>{await o.Z.delete("/users/delete/"+e,h.Z)}),window.location.reload()}catch(e){console.log(e)}},p=async e=>{try{e.map(async e=>{await o.Z.post("/users/unblock/"+e,h.Z).then(e=>{console.log(e)})}),window.location.reload()}catch(e){console.log(e)}},f=async e=>{try{e.map(async e=>{await o.Z.post("/users/block/"+e,h.Z)}),window.location.reload()}catch(e){console.log(e)}};return(0,i.useEffect)(()=>{let e=async()=>{try{let e=await o.Z.get("/users",h.Z);a(e.data)}catch(e){console.log(e)}},s=async()=>{try{let e=await o.Z.get("/getuser",h.Z);c(e.data),t(e.data.status)}catch(e){console.log(e)}};s(),e()},[]),(0,n.jsxs)("div",{className:"p-5",children:[e&&(0,n.jsxs)("div",{className:"shadow-sm",children:[(0,n.jsxs)("div",{className:"p-3",style:{background:"rgba(0,0,0,.1)"},children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsxs)("p",{children:["Selected items: ",u.toString()]}),(0,n.jsxs)("p",{children:["You logged in as: ",s.email]})]}),(0,n.jsx)(d.Z,{variant:"warning",className:"me-3",onClick:()=>f(u),children:(0,n.jsx)("strong",{style:{color:"rgba(1,1,1,0.7)"},children:"Block"})}),(0,n.jsx)(d.Z,{variant:"success",className:"me-3",children:(0,n.jsx)("img",{className:"d-flex align-items-center",style:{filter:"invert(100%)",width:"23px",height:"auto"},src:"/unlockIcon.png",alt:"",onClick:()=>p(u)})}),(0,n.jsx)(d.Z,{variant:"danger",className:"me-3",children:(0,n.jsx)("img",{className:"d-flex align-items-center",style:{filter:"invert(100%)",width:"23px",height:"auto"},src:"/deleteIcon.png",alt:"",onClick:()=>g(u)})})]}),(0,n.jsxs)(l,{striped:!0,bordered:!0,hover:!0,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)("input",{type:"checkbox",onChange:function(){if(r.length===u.length)x([]);else{let e=r.map(e=>e._id);x(e)}}})}),(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Email"}),(0,n.jsx)("th",{children:"Registration time UTC"}),(0,n.jsx)("th",{children:"Last login time UTC"}),(0,n.jsx)("th",{children:"Status"})]})}),(0,n.jsx)("tbody",{children:r.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)("input",{type:"checkbox",checked:u.includes(e._id),value:e._id,onChange:j,name:"",id:""})}),(0,n.jsx)("td",{children:e._id}),(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.email}),(0,n.jsx)("td",{children:e.createdAt.replace(/\.\d+/,"")}),(0,n.jsx)("td",{children:e.updatedAt.replace(/\.\d+/,"")}),(0,n.jsx)("td",{children:e.status?(0,n.jsx)("p",{children:"Active"}):(0,n.jsx)("p",{children:"Blocked"})})]},e._id))})]})]}),!e&&(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsxs)("h2",{children:["To see table of users you need to ",(0,n.jsx)("a",{href:"/login",children:"login"})," or ",(0,n.jsx)("a",{href:"/register",children:"register"})]})})]})}}},function(e){e.O(0,[129,727,774,888,179],function(){return e(e.s=11)}),_N_E=e.O()}]);